/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for running minimal tests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines input files and everything required to run a fast and simple pipeline test.

    Use as follows:
        nextflow run nf-core/differentialabundance -profile test,<docker/singularity> --outdir <OUTDIR>

----------------------------------------------------------------------------------------
*/

includeConfig 'rnaseq.config'
includeConfig 'nf-plugin.config'
params {

    study_name = 'QDESC'
    config_profile_name        = 'QBiC Test profile'
    config_profile_description = 'A QBiC test project description.'

    // Input data
    input = "${projectDir}/testing/samplesheet.csv"
    //input = "${projectDir}/testing/samplesheet_mod.csv' // contains spaces
    matrix = "${projectDir}/testing/salmon.merged.gene_counts.tsv"
    transcript_length_matrix = "${projectDir}/testing/salmon.merged.gene_lengths.tsv"
    contrasts = "${projectDir}/testing/contrasts.csv"
    //contrasts = "${projectDir}/testing/contrasts_mod.csv" // contains spaces
    //contrasts_yml = "${projectDir}/testing/contrasts.yml"

    // To do: replace this with a cut-down mouse GTF matching the matrix for testing
    gtf = "${projectDir}/testing/Homo_sapiens.GRCh38.113.gtf.gz"

    igenomes_ignore = true

    // Observations
    observations_id_col        = 'sample'
    observations_name_col      = 'sample'

    // Apply a higher filter to check that the filtering works
    // filtering_min_abundance = 10
    // differential_min_fold_change = 1

    // Exploratory
    exploratory_main_variable      = 'contrasts'

    // Test dataset is too small for the nsub default value
    // deseq2_vst_nsub              = 500
    deseq2_lfc_threshold            = 1 
    deseq2_alpha                    = 0.05



    // Activate functional enrichment, either or
    /* 
    functional_method = 'gsea'
    gsea_metric = 'Ratio_of_Classes' // "Signal2Noise" //, "tTest", "Ratio_of_Classes", "Diff_of_Classes", "log2_Ratio_of_Classes"
    gene_sets_files = 'https://biit.cs.ut.ee/gprofiler//static/gprofiler_full_hsapiens.name.gmt'
    // "${projectDir}testing/gprofiler_full_hsapiens.ENSG.gmt' // does not work with Ensembl IDs
    */


    
    // Activate gprofiler2
    /*
    functional_method = 'gprofiler2'
    gprofiler2_organism = 'hsapiens'
    */

    // Style
    
    css_file = "${projectDir}/testing/corp-styles.css"
    logo_file = "${projectDir}/testing/logo.png"
    

    // Report options
    round_digits = 3  // report_round_digits = 3 // deprecated in dev
    report_author = 'QBiC Staff - Bioinformatics Scientist - University of Tuebingen'
    // Report options
    report_contributors = 'John Smith\nDirector of Institute of Microbiology\nUniversity of Smallville\njohn.smith@domain.de;Alice Johnson\nPhD student\nInstitute of Forensics\nUniversity of Tuebingen\nalice.johnsonon@tuebingen.de\nOtfried-Müller-Straße 37\n72076 Tuebingen\nGermany'

   
    //report_contributors = 'Project Members:\n<b><i>John Smith</i></b>\nDirector of Institute of Microbiology\nUniversity of Smallville\nEmail: john.smith@domain.de\nSmallville USA;;QBiC Contacts:\n<b><i>Alice Johnson</i></b>\nPhD student\nUniversity of Tuebingen\nEmail alice.johnsonon@tuebingen.de\nOtfried-Müller-Straße 37\n72076 Tuebingen\nGermany'
    //report_contributors = 'Project Members:\nJohn Smith\nDirector of Institute of Microbiology University of Smallville\nEmail: john.smith@domain.de\nSmallville USA;;QBiC Contacts:\nAlice Johnson\nPhD student University of Tuebingen\nEmail alice.johnsonon@tuebingen.de\nOtfried-Müller-Straße 37, 72076 Tuebingen, Germany'
    //report_contributors = 'Project Members:\n<b><i>John Smith</i></b>Institute of Microbiology;Alice Smith\nPhD student University of Tuebingen'
    report_title = 'QBiC QDESC Test Report'
    
}
